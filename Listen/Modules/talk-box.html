<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="message-box.html">

<dom-module id = "talk-box">

<style>
	#big_container{
		z-index: 999;
		position: absolute;
		top:0;
		left:0;
		height: 100%;
		width:100%;
		text-align: center;
	}
	#container{
		position: relative;
		z-index: 999;
		display: inline-block;
		width:700px;
		top:5%;
		height: 90%;
		background: white;
		color: white;
	}

	#input_container{
		position: absolute;
		bottom: 0px;
		left: 0;
		background: black;
		height: 60px;
		width:100%;
		text-align: left;
	}

	#input_container input{
		display: inline-block;
		width: calc(100% - 55px);
		height: 100%;
		background: none;
		color: white;
		font: 20pt "Helvetica neue";
		vertical-align: top;
	}
	#input_container input:focus{
		outline: none; 
	}
	#send_icon{
		--iron-icon-width:50px;
		--iron-icon-height:50px;
		display: inline-block;
		vertical-align: top;
		margin-top: 7px;
		margin-left: -4px;
		cursor: pointer;
	}

	#send_icon:hover{
		fill:rgb(120,180,255);
	}
	#conv_container{
		position: absolute;
		top: 0px;
		left: 0;
		background: white;
		color:black;
		height: calc(100%-60px);
		width:100%;
		text-align: left;
		font: 20pt "Helvetica neue";
	}

</style>

<template>
	<div id = "big_container">
		<div id ="container">
			<div id = "conv_container">
				<message-box messagetext="{{sometext}}"></message-box>
			</div>
			<div id = "input_container">
			<input id = "message"></input>
			<iron-icon on-click = "send_message" icon = "chevron-right" id="send_icon"></iron-icon>
			
			</div>
		</div>
	</div>
</template>

<script>
	Polymer({
	  properties: {
         sometext: String
      },
      listeners: {
        'update':'update_stream'
      },
	  is: "talk-box",
	  send_message: function(){
	  	var message = document.getElementById("message").value;
	  	ref.push(message);
	  	document.getElementById("message").value = "";
	  },
	  ready: function() {
	  		var placeholder;
			
 	  },
 	  update_stream: function(e,detail){
 	  	//this.sometext = detail.placeholder;
 	  	//console.log(detail.placeholder)

 	  	var new_mess = document.createElement("message-box");
		  //new_mess.setAttribute("id", "my-element-id");
		  new_mess.setAttribute("messagetext", detail.placeholder);
		  document.getElementById("conv_container").appendChild(new_mess);
		  console.log("gettin here");
 	  }
	});
</script>

</dom-module>