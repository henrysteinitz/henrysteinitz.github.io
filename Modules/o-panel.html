<!-- Henry Steinitz 2015-->

<link rel="import" href="../bower_components/polymer/polymer.html">


<dom-module id="o-panel">
  	<style>
  		#container{
        position: relative;
  			z-index: -2;
  			width: 100%;
  			height:820px;
  			overflow: hidden;
  			float: left;

  		}
  		img{
        margin-top: -220px;
  			z-index: -1;
  			border: 0px;
  			padding: 0px;
        height: 100%;
        overflow: hidden;

  		}
      #shade{
        z-index: 0;
        position: absolute;
        top:0;
        background:rgb(0,0,0);
        opacity: .1;
        width: 100%;
        height:600px;
        overflow: hidden;
        will-change: transform, opacity;
      }
      #shade_cover{
        z-index: 3;
        margin-top: 0px;
        background:white;
        width: 100%;
        height:40px;
      }
  	</style>
	<template>
		<div id = "container">
			<img  id = "pic" width = "100%" src = "../Test_Images/waterfall.jpg">
      <div id = "shade">
      </div>
		</div>

	</template>

	<script>
	Polymer({
	  is: "o-panel",
    ready: function(e) {
        var height = 0;
        var height2 = 0;
        var start_alpha = .4;
        var alpha = start_alpha;
        var alpha_diff = 0;
        var upheight = 400.0;
        var downheight = 600.0;
        var pic = this.$.shade;
          addEventListener('scroll', function (event) {
              height = window.scrollY - upheight;
              alpha_diff = .6*(height / (downheight-upheight));
              if(alpha_diff > .6){
                alpha = 1;
              }
              else if (alpha_diff < 0){
                alpha = start_alpha;
              }
              else{
                alpha = start_alpha + alpha_diff;
              }
              //height2 =  (height / 4);
              //pic.style.opacity =  alpha + "";
          });
    }
	});
	</script>

</dom-module>